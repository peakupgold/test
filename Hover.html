<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Obsidian Trace HUD</title>
    <link href="https://fonts.googleapis.com/css2?family=Tektur:wght@700&family=PT+Mono&family=Inter:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --plasma-core: #ffffff;
            --plasma-cyan: #00f2ff;
            --plasma-purple: #9d00ff;
            --glass: rgba(5, 5, 8, 0.98);
            --title-font: 'Tektur', sans-serif;
            --mono-font: 'PT Mono', monospace;
            --sub-grey: #aaaaaa;
        }

        body, html { 
            margin: 0; padding: 0; height: 100%; width: 100%; 
            background: #000; color: #fff; 
            font-family: 'Inter', sans-serif; 
            display: flex; flex-direction: row; overflow: hidden; 
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 380px; height: 100vh;
            background: var(--glass); backdrop-filter: blur(50px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            padding: 50px 40px; z-index: 100; box-sizing: border-box;
            display: flex; flex-direction: column; flex-shrink: 0;
            position: relative;
        }

        /* --- THE RESTORED PLASMA BEAM --- */
        .sidebar::after {
            content: '';
            position: absolute;
            top: 0;
            right: -1px; /* Perfectly on the edge */
            width: 2px;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent, 
                var(--plasma-cyan), 
                var(--plasma-purple), 
                var(--plasma-cyan), 
                transparent);
            background-size: 100% 200%;
            opacity: 0;
            filter: blur(2px) brightness(1.5);
            transition: opacity 0.4s ease;
            pointer-events: none;
        }

        /* Active state for the Beam */
        .sidebar.active-edge::after {
            opacity: 1;
            animation: traceFlow 2s linear infinite;
        }

        @keyframes traceFlow {
            0% { background-position: 0% 0%; }
            100% { background-position: 0% 200%; }
        }

        .logo-area { height: 60px; margin-bottom: 40px; display: flex; align-items: center; flex-shrink: 0; }
        .main-logo { max-width: 100%; max-height: 100%; object-fit: contain; }

        .drawer-content { flex-grow: 1; overflow-y: auto; overflow-x: hidden; }

        .info-block { margin-top: 25px; display: flex; flex-direction: column; align-items: flex-start; }
        .label { 
            color: var(--plasma-cyan); font-family: var(--title-font); font-size: 0.85rem; 
            text-transform: uppercase; letter-spacing: 2px; font-weight: 700; 
            margin-bottom: 6px; opacity: 0.35; transition: all 0.3s ease; 
        }
        
        .sub-label, .value { 
            font-family: var(--mono-font); opacity: 0; visibility: hidden; transform: translateY(5px); 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            width: 100%; word-wrap: break-word; overflow-wrap: break-word; 
        }
        .sub-label { color: var(--sub-grey); font-size: 0.62rem; margin-bottom: 4px; }
        .value { font-size: 0.88rem; color: #eee; line-height: 1.5; }

        .info-block.active .label { opacity: 1; text-shadow: 0 0 10px rgba(0, 210, 255, 0.4); }
        .info-block.active .sub-label, .info-block.active .value { opacity: 1; visibility: visible; transform: translateY(0); }

        /* --- SLOW INSPECT BUTTON --- */
        #inspect-container { height: 0; opacity: 0; overflow: hidden; transition: all 0.4s ease; }
        #inspect-container.visible { height: 50px; opacity: 1; margin-top: 30px; }

        .inspect-btn {
            width: 100%; height: 40px; 
            background: rgba(0, 210, 255, 0.05);
            border: 1px solid rgba(0, 210, 255, 0.4); color: var(--plasma-cyan);
            font-family: var(--title-font); font-weight: 700; font-size: 0.8rem;
            text-transform: uppercase; letter-spacing: 2px; cursor: pointer;
            position: relative; overflow: hidden;
            transition: 0.3s; display: flex; align-items: center; justify-content: center;
        }

        .inspect-btn::before {
            content: ''; position: absolute; top: 0; left: -150%; width: 60%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(0, 210, 255, 0.25), transparent);
            transform: skewX(-25deg); animation: lightSweep 4s infinite linear;
        }

        @keyframes lightSweep { 0% { left: -150%; } 100% { left: 150%; } }

        .inspect-btn:hover { background: var(--plasma-cyan); color: #000; box-shadow: 0 0 30px var(--plasma-cyan); border-color: var(--plasma-cyan); }

        /* --- ACTION BUTTONS --- */
        .action-container { display: flex; flex-direction: column; gap: 12px; margin-top: auto; padding-top: 30px; }
        .wave-btn { 
            position: relative; width: 100%; max-width: 240px; height: 48px; background: rgba(255, 255, 255, 0.03); 
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 4px; overflow: hidden; display: flex; 
            align-items: center; padding: 0 18px; color: #fff; text-decoration: none; font-size: 0.75rem; 
            letter-spacing: 1px; font-family: var(--title-font); font-weight: 700; text-transform: uppercase; transition: 0.3s; 
        }
        .wave-btn .liquid { position: absolute; top: 100%; left: 0; width: 100%; height: 100%; background: var(--plasma-cyan); opacity: 0.2; transition: transform 0.5s ease; z-index: 0; }
        .wave-btn:hover .liquid { transform: translateY(-100%); }
        .btn-content { position: relative; z-index: 2; display: flex; align-items: center; }
        .btn-icon { width: 18px; height: 18px; margin-right: 12px; }

        /* --- STAGE --- */
        .stage { flex-grow: 1; position: relative; background: #000; overflow: hidden; }
        .bg-img { width: 100%; height: 100%; object-fit: cover; position: absolute; opacity: 0.4; transition: opacity 0.4s ease; }
        svg.overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; opacity: 0; transition: opacity 0.3s ease; }
        svg.overlay.active-view { opacity: 1; }
        .plasma-group { opacity: 0; visibility: hidden; transition: opacity 0.2s ease; }
        .active-group { opacity: 1 !important; visibility: visible !important; }

        .p-outer { stroke: var(--plasma-purple); stroke-width: 4; fill: none; opacity: 0.6; filter: blur(4px) url(#precision-plasma); }
        .p-mid { stroke: var(--plasma-cyan); stroke-width: 1.2; fill: none; filter: url(#precision-plasma); }
        .p-core { stroke: var(--plasma-core); stroke-width: 0.4; fill: none; filter: url(#precision-plasma); }
        .hotspot { fill: transparent; cursor: pointer; pointer-events: auto; -webkit-tap-highlight-color: transparent; }

        @media (max-width: 768px) {
            body, html { flex-direction: column; }
            .sidebar { width: 100%; height: 55vh; order: 2; padding: 25px 30px; border-top: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px 24px 0 0; border-right: none; }
            .sidebar::after { width: 100%; height: 2px; top: -1px; left: 0; right: 0; background: linear-gradient(to right, transparent, var(--plasma-cyan), var(--plasma-purple), var(--plasma-cyan), transparent); background-size: 200% 100%; }
            .sidebar.active-edge::after { animation: traceFlowMobile 2s linear infinite; }
            @keyframes traceFlowMobile { 0% { background-position: 0% 0%; } 100% { background-position: 200% 0%; } }
            .stage { width: 100%; height: 45vh; order: 1; flex-shrink: 0; }
            .action-container { padding-top: 15px; flex-direction: row; gap: 10px; }
            .wave-btn { max-width: none; width: 100%; height: 42px; font-size: 0.65rem; }
        }
    </style>
</head>
<body>

<div class="sidebar" id="main-sidebar">
    <div class="logo-area">
        <img src="logo.png" alt="Logo" class="main-logo" onerror="this.style.display='none'; this.parentElement.innerHTML='<h2 style=color:var(--plasma-cyan);letter-spacing:4px;font-family:var(--title-font);margin:0>OBSIDIAN</h2>'">
    </div>
    <div class="drawer-content">
        <div class="info-block" id="b1"><div class="label">Part Name</div><span class="sub-label">Amount Included</span><div class="value" id="v1">-</div></div>
        <div class="info-block" id="b2"><div class="label">Description</div><div class="value" id="v2">-</div></div>
        <div class="info-block" id="b3"><div class="label">Connected To</div><div class="value" id="v3">-</div></div>
        <div class="info-block" id="b4"><div class="label">Tools Need</div><div class="value" id="v4">-</div></div>
        <div id="inspect-container"><button class="inspect-btn">Inspect Part</button></div>
    </div>
    <div class="action-container">
        <a href="#" class="wave-btn"><div class="liquid"></div><div class="btn-content"><img src="https://upload.wikimedia.org/wikipedia/commons/4/45/Notion_app_logo.png" class="btn-icon"> Resources</div></a>
        <a href="#" class="wave-btn"><div class="liquid"></div><div class="btn-content"><img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" class="btn-icon"> Support</div></a>
    </div>
</div>

<div class="stage" id="main-stage">
    <img src="asa.jpeg" class="bg-img" id="bg-photo">
    <svg class="overlay" id="hud-svg" viewBox="0 0 1000 1000" preserveAspectRatio="none">
        <defs>
            <filter id="precision-plasma"><feTurbulence baseFrequency="0.04 0.15" numOctaves="3"><animate attributeName="seed" from="1" to="100" dur="0.8s" repeatCount="indefinite"/></feTurbulence><feDisplacementMap in="SourceGraphic" scale="8"/></filter>
        </defs>

        <g id="target-machine" class="plasma-group">
            <path class="p-outer" d="M385,260 Q382,270 382,300 L382,510 Q385,535 410,535 L735,535 Q755,535 758,510 L758,300 Q758,260 740,260 L410,260 Z" />
            <path class="p-mid" d="M385,260 Q382,270 382,300 L382,510 Q385,535 410,535 L735,535 Q755,535 758,510 L758,300 Q758,260 740,260 L410,260 Z" />
            <path class="p-core" d="M385,260 Q382,270 382,300 L382,510 Q385,535 410,535 L735,535 Q755,535 758,510 L758,300 Q758,260 740,260 L410,260 Z" />
        </g>
        <path class="hotspot" d="M380,255 L760,255 L760,540 L380,540 Z" 
              data-target="target-machine" data-name="Main Machine (base unit)" data-amt="1 Unit" 
              data-desc="Primary device body; houses controls and core electronics" 
              data-conn="Wall outlet (via pedal + power cable), coil" data-tools="None (unboxing: box cutter/scissors)" />

        <g id="target-gap" class="plasma-group">
            <path class="p-outer" d="M508,438 L630,438 L630,528 L508,528 Z" />
            <path class="p-mid" d="M508,438 L630,438 L630,528 L508,528 Z" />
            <path class="p-core" d="M508,438 L630,438 L630,528 L508,528 Z" />
        </g>
        <rect class="hotspot" x="500" y="430" width="140" height="110" 
              data-target="target-gap" data-name="Spark gap box" data-amt="1 Housing Assembly" 
              data-desc="Protective housing containing the electrode bolts. Keeps electrodes shielded and stable." 
              data-conn="Tank capacitor, coil circuit (Inside Toolbox path)" data-tools="Feeler gauge set (for gap setting)" />
    </svg>
</div>

<script>
    const hotspots = document.querySelectorAll('.hotspot');
    const blocks = document.querySelectorAll('.info-block');
    const sidebar = document.getElementById('main-sidebar');
    const hudSvg = document.getElementById('hud-svg');
    const bgPhoto = document.getElementById('bg-photo');
    const inspectBox = document.getElementById('inspect-container');
    
    let isLocked = false;

    function activate(hs) {
        hudSvg.classList.add('active-view');
        sidebar.classList.add('active-edge'); // RESTORED BEAM
        bgPhoto.style.opacity = "0.8";
        document.getElementById('v1').innerText = hs.dataset.name;
        blocks[0].querySelector('.sub-label').innerText = hs.dataset.amt;
        document.getElementById('v2').innerText = hs.dataset.desc;
        document.getElementById('v3').innerText = hs.dataset.conn;
        document.getElementById('v4').innerText = hs.dataset.tools;
        blocks.forEach(b => b.classList.add('active'));
        document.querySelectorAll('.plasma-group').forEach(p => p.classList.remove('active-group'));
        const target = document.getElementById(hs.dataset.target);
        if(target) target.classList.add('active-group');
    }

    function deactivate() {
        if (isLocked) return;
        hudSvg.classList.remove('active-view');
        sidebar.classList.remove('active-edge'); // HIDE BEAM
        bgPhoto.style.opacity = "0.4";
        blocks.forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.plasma-group').forEach(p => p.classList.remove('active-group'));
        inspectBox.classList.remove('visible');
    }

    hotspots.forEach(hs => {
        hs.addEventListener('mouseenter', () => { if(!isLocked) activate(hs); });
        hs.addEventListener('mouseleave', deactivate);
        hs.addEventListener('click', (e) => {
            e.stopPropagation();
            isLocked = true;
            activate(hs);
            inspectBox.classList.add('visible');
        });
        hs.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isLocked = true;
            activate(hs);
            inspectBox.classList.add('visible');
        }, {passive: false});
    });

    document.body.addEventListener('click', (e) => {
        if (!e.target.closest('.hotspot') && !e.target.closest('.sidebar')) {
            isLocked = false;
            deactivate();
        }
    });
</script>
</body>
</html>